!function(){"use strict";!function(){class e{constructor(e){this.input=e,this.id=this.randNum()}randNum(){return Math.floor(200*Math.random())}}class t{constructor(){this.container=document.querySelector(".alert-container"),this.form=document.querySelector("form"),this.input=document.getElementById("task"),this.ulList=document.querySelector("ul"),this.fltTasks=document.querySelectorAll(".rm-task"),this.button=document.querySelector(".button"),this.filter=document.getElementById("filter")}addTaskToList(e){const t=this.ulList,s=document.createElement("li");s.className="list__item",s.innerHTML=`${e.input} <button class='rm-task'>X</button>`,s.setAttribute("data-id",e.id),t.appendChild(s)}clearInput(){this.input.value=""}showAlert(e,t){const s=this.input.value,a=document.createElement("div");a.classList.add("alert","faded-out",`${t}`),requestAnimationFrame((()=>{a.classList.remove("faded-out")})),a.innerHTML=`<b>${s}</b> ${e}`;this.container.appendChild(a),setTimeout((()=>{this.hideAlert()}),2e3)}hideAlert(){document.querySelector(".alert").remove()}deleteTask(e){e.parentElement.remove(),console.log(e.parentNode.firstChild.data)}deleteAllTasks(e){e.firstChild.remove()}filterTasks(e){const t=e.value.toLowerCase();this.fltTasks.forEach((e=>{-1!=e.parentElement.firstChild.textContent.toLowerCase().indexOf(t)?e.parentElement.style.display="flex":e.parentElement.style.display="none"}))}}class s{static getTasks(){let e;return e=null===localStorage.getItem("tasks")?[]:JSON.parse(localStorage.getItem("tasks")),e}static addTask(e){const t=s.getTasks();t.push(e),localStorage.setItem("tasks",JSON.stringify(t))}static displayTasks(){s.getTasks().forEach((e=>{(new t).addTaskToList(e)}))}static removeTask(e){const t=s.getTasks();t.forEach(((s,a)=>{e==s.id&&(console.log(`${e} : ${s.input}`),t.splice(a,1)),localStorage.setItem("tasks",JSON.stringify(t))}))}static removeAllTasks(){localStorage.clear()}}let a=new t;const l=e=>{(new t).filterTasks(e.target)},o=a=>{let l=new t,o=l.input.value;const r=/^\s*$/gi.test(o);if(console.log(r),r)console.log("nera inputo"),l.showAlert("<b>Please enter something</b>","error"),l.clearInput();else{let t=new e(o);console.log(t),l.addTaskToList(t),l.showAlert(" was added!","success"),l.clearInput(),s.addTask(t)}a.preventDefault()},r=e=>{const a=e.target.parentElement.getAttribute("data-id"),l=e.target.parentNode.firstChild.data,o=`Are  you sure about: ${l}`,r=new t;"rm-task"===e.target.className&&!0===confirm(o)&&(r.deleteTask(e.target),r.showAlert(`<b>${l}</b>, was removed!`,"success"),s.removeTask(a))},n=()=>{const e=new t,a=e.ulList;if(a.firstChild){if(confirm("Remove all?")){for(;a.firstChild;)e.deleteAllTasks(a),s.removeAllTasks();e.showAlert("<b>All tasks are gone</b>","success")}}else e.showAlert("<b>Nothing to remove!</b>","error")};document.addEventListener("DOMContentLoaded",(function(){s.displayTasks(),a.form.addEventListener("submit",o),a.ulList.addEventListener("click",r),a.button.addEventListener("click",n),a.filter.addEventListener("keyup",l)})),console.log(s.getTasks()),console.log(localStorage)}()}();